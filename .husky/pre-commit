#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo 'ğŸ“¦ ğŸ“¦ ğŸ“¦'
echo 'Styling, testing and building your project before committing.'

# Check Prettier standards
echo 'ğŸ‘®ğŸ¼â€â™€ï¸ğŸ‘®ğŸ¼â€â™€ï¸ğŸ‘®ğŸ¼â€â™€ï¸'
echo 'Check Prettier standards...'

yarn check-format ||
(
  echo 'ğŸ§¨ ğŸ§¨ ğŸ§¨'
  echo 'Prettier check failed.'

  false;
)

# Check ESLint standards
echo 'ğŸ‘®ğŸ¼â€â™€ï¸ğŸ‘®ğŸ¼â€â™€ï¸ğŸ‘®ğŸ¼â€â™€ï¸'
echo 'Check ESLint standards...'

yarn check-lint ||
(
  echo 'ğŸ§¨ ğŸ§¨ ğŸ§¨'
  echo 'ESLint check failed.'

  false;
)

# Check TSconfig standards
echo 'ğŸ‘®ğŸ¼â€â™€ï¸ğŸ‘®ğŸ¼â€â™€ï¸ğŸ‘®ğŸ¼â€â™€ï¸'
echo 'Check TSconfig standards...'

yarn check-types ||
(
  echo 'ğŸ§¨ ğŸ§¨ ğŸ§¨'
  echo 'Failed type check.'

  false;
)

# Unit test
echo 'ğŸ‘®ğŸ¼â€â™€ï¸ğŸ‘®ğŸ¼â€â™€ï¸ğŸ‘®ğŸ¼â€â™€ï¸'
echo 'Testing...'

yarn test ||
(
  echo 'ğŸ§¨ ğŸ§¨ ğŸ§¨'
  echo 'Testing failed.'

  false;
)

# Building
echo 'ğŸ—ï¸ ğŸ— ğŸ—'
echo 'Building...'

yarn build ||
(
  echo 'ğŸ§¨ ğŸ§¨ ğŸ§¨'
  echo 'Build failed.'

  false;
)

# If everything passes... Now we can commit
echo 'ğŸš€ ğŸš€ ğŸš€'
echo 'Committing...'
